<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Transaction Analyzer</title>
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <style>
    body {
      margin:0;
      background:#0d1117;
      color:#c9d1d9;
      font-family:monospace;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .console {
      background:#161b22;
      border:1px solid #30363d;
      border-radius:6px;
      width:95%;
      max-width:800px;
      height:90vh;
      display:flex;
      flex-direction:column;
      padding:1rem;
      box-sizing:border-box;
    }
    #output {
      flex:1;
      overflow-y:auto;
      white-space:pre-wrap;
    }
    #prompt {
      display:flex;
      align-items:center;
    }
    #prompt span { color:#58a6ff; margin-right:0.5rem; }
    #choice {
      flex:1;
      background:#0d1117;
      border:none;
      border-bottom:1px solid #58a6ff;
      color:#c9d1d9;
      font:inherit;
      outline:none;
    }
    /* Responsive tweaks */
    @media (max-width:600px) {
      .console { height:80vh; font-size:0.9rem; }
    }
  </style>
</head>
<body>
  <div class="console">
    <div id="output">Python 3.11.5 (PyScript)\nTransaction Analyzer ready.\nOptions:\n1. Print summary\n2. Analyze transactions\n3. Add a transaction\n4. Stop program\n</div>
    <div id="prompt"><span>>> </span><input id="choice" placeholder="Enter option number"></div>
  </div>

  <py-script>
from js import document

data = [
  (749.17, "Investment Return"), (-11.54, "Utilities"), (-247.58, "Online Shopping"),
  (981.17, "Investment Return"), (-410.65, "Rent"), (310.60, "Rent"), (563.70, "Gift"),
  (220.79, "Salary"), (-49.85, "Car Maintenance"), (308.49, "Salary"),
  (-205.55, "Car Maintenance"), (870.64, "Salary"), (-881.51, "Utilities"),
  (518.14, "Salary"), (-264.66, "Groceries")
]

def print_summary():
    deposits = [amt for amt,_ in data if amt>=0]
    withdrawals = [amt for amt,_ in data if amt<0]
    return (f"Total deposited: {sum(deposits):.2f}\n"
            f"Total withdrawn: {sum(withdrawals):.2f}\n"
            f"Balance: {sum(deposits)+sum(withdrawals):.2f}")

def analyze_transactions():
    deposits = [amt for amt,_ in data if amt>=0]
    withdrawals = [amt for amt,_ in data if amt<0]
    avg = lambda arr: sum(arr)/len(arr) if arr else 0
    return (f"Average deposit: {avg(deposits):.2f}\n"
            f"Average withdrawal: {avg(withdrawals):.2f}\n"
            f"Largest deposit: {max(deposits) if deposits else 0}\n"
            f"Largest withdrawal: {min(withdrawals) if withdrawals else 0}")

def add_transaction():
    try:
        amt = float(input("Enter amount (positive=deposit, negative=withdrawal): "))
        desc = input("Enter description: ")
        data.append((amt, desc))
        return "Transaction added."
    except:
        return "Invalid input."

def handle_choice(event):
    choice = document.getElementById("choice").value.strip()
    out = ""
    if choice == "1":
        out = print_summary()
    elif choice == "2":
        out = analyze_transactions()
    elif choice == "3":
        out = add_transaction()
    elif choice == "4":
        out = "Exiting program..."
    else:
        out = "Invalid choice."
    output = document.getElementById("output")
    output.textContent += f">>> {choice}\n{out}\n"
    output.scrollTop = output.scrollHeight
    document.getElementById("choice").value = ""

document.getElementById("choice").addEventListener("change", handle_choice)
  </py-script>
</body>
</html>
